<header class="header">
  <div class="logo">
    <a routerLink="/" class="logo-link">
      <h1>StaffPlan</h1>
    </a>
  </div>
  <nav class="nav">
    @if (securityStore.isLoading()) {
      <span>Loading...</span>
    } @else if (securityStore.user()) {
      @if (securityStore.hasAnyRole()) {
        <a routerLink="/positions" routerLinkActive="active" class="nav-link">Positions</a>
        @if (securityStore.isAdmin()) {
          <a routerLink="/admin/users" routerLinkActive="active" class="nav-link">Users</a>
        }
      }
      <span class="user-info">
        {{ securityStore.user()?.firstName }} {{ securityStore.user()?.lastName }}
      </span>
      <button class="btn btn-outline" (click)="securityStore.signOut()">Logout</button>
    } @else {
      <button class="btn btn-primary" (click)="securityStore.signIn()">Login</button>
    }
  </nav>
</header>

<main class="main">
  @if (securityStore.user() && !securityStore.hasAnyRole()) {
    <app-access-denied />
  } @else {
    <router-outlet />
  }
</main>

<footer class="footer">
  <a routerLink="/impressum">Impressum</a>
  <span class="separator">|</span>
  <a routerLink="/datenschutz">Datenschutz</a>
</footer>
